{% extends "base.html" %}
{% load static %}

{% block extra_css %}
    <link rel="stylesheet" href="{% static 'css/title_card.css' %}">
{% endblock %}

{% block content %}
<div class="container mt-5">
    <h1 data-translate-key="header.products">Productes</h1>
    <hr>
    {% for product in products %}
    <div class="product-card">
        <div class="product-header">
            <h2>{{ product.name }} - {{ product.price }} {{ product.currency }}</h2>
        </div>
        <div class="product-body">
            {% for package in product.packages.all %}
            <div class="accordion">
                <div class="accordion-header">
                    <h4 class="package-title">{{ package.name }}</h4>
                    <span class="accordion-icon">+</span>
                </div>
                <div class="accordion-content">
                    <section class="title-cards-container">
                        {% for item in package.titles_with_status %}
                            {% include 'products/_title_card.html' with item=item %}
                        {% empty %}
                            <p data-translate-key="home.no_titles_in_package">No hi ha t√≠tols en aquest paquet.</p>
                        {% endfor %}
                    </section>
                </div>
            </div>
            {% empty %}
            <p class="product-text" data-translate-key="product_list.no_packages">No hi ha paquets en aquest producte.</p>
            {% endfor %}
        </div>
    </div>
    {% empty %}
    <p data-translate-key="product_list.no_products">No hi ha productes disponibles.</p>
    {% endfor %}
</div>
{% endblock %}

{% block extra_js %}
<script src="{% static 'js/accordion.js' %}"></script>
{% endblock %}
