{% extends 'base.html' %}
{% load static %}

{% block title %}Audiovook Dual — Històries en dues llengües{% endblock %}

{% block content %}
<section class="hero">
    <div class="hero__text">
        <p class="hero__kicker">{{ translatable_content.kicker|safe }}</p>
        <h1>{{ translatable_content.cta_title|safe }}</h1>
        <p class="hero__subtitle">{{ translatable_content.cta_subtitle|safe }}</p>
        <div class="hero__actions">
            <a class="button" href="#productes">{{ translatable_content.discover_products|safe }}</a>
            &nbsp;
            <a class="button button--ghost" href="{% url 'signup' %}">{{ translatable_content.create_account|safe }}</a>
        </div>
    </div>
    <div class="hero__art">
        <img src="{% static 'imgs/logo-dual-fons-blau.png' %}" alt="Mockup Audiovook" />
    </div>
</section>

<section class="features" id="productes">
    <div class="section__header">
        <p class="kicker">{{ translatable_content.products|safe }}</p>
        <h2>{{ translatable_content.short_stories|safe }}</h2>
        <p>{{ translatable_content.browse_catalog|safe }}</p>
        {% if user.is_authenticated %}
            <a class="button button--small" href="{% url 'products:product_create' %}">{{ translatable_content.add_new_product|safe }}</a>
        {% endif %}
    </div>
    <div class="product-grid">
        {% for product in products %}
            <article class="product-card">
                <img src="{% static 'imgs/logo.png' %}" alt="{{ product.name }}" class="product-card__image" />
                <div class="product-card__body">
                    <h3>{{ product.name }}</h3>
                    <p class="product-card__description">{{ product.description|truncatewords:30 }}</p>

                    {% for package in product.packages.all %}
                        <p class="product-card__meta"><span>{{ translatable_content.package|safe }}</span> {{ package.name }}</p>
                        {% if package.titles.all %}
                            <div class="product-card__titles">
                                <p class="kicker">{{ translatable_content.included_titles|safe }}</p>
                                <ul>
                                    {% for title in package.titles.all %}
                                        <li>
                                            <span class="product-card__title-name">{{ title.human_name }}</span>
                                            {% if title.languages.all %}
                                                <span class="product-card__badge">
                                                    {% for lang in title.languages.all %}{{ lang.language }}{% if not forloop.last %}, {% endif %}{% endfor %}
                                                </span>
                                            {% endif %}
                                            {% if title.duration %}<span class="product-card__badge product-card__badge--muted">{{ title.duration }}</span>{% endif %}
                                        </li>
                                    {% endfor %}
                                </ul>
                            </div>
                        {% else %}
                            <p class="product-card__meta">{{ translatable_content.no_titles_in_package|safe }}</p>
                        {% endif %}
                    {% endfor %}

                    <div class="product-card__footer">
                        <span class="product-card__price">{{ product.price }} €</span>
                        <a class="button button--small" href="{% url 'products:product_detail' product.pk %}">{{ translatable_content.view_details|safe }}</a>
                    </div>
                </div>
            </article>
        {% empty %}
            <p>{{ translatable_content.no_products|safe }}</p>
        {% endfor %}
    </div>
</section>

<section class="cta">
    <div class="cta__text">
        <h2>{{ translatable_content.final_cta_title|safe }}</h2>
        <p>{{ translatable_content.final_cta_subtitle|safe }}</p>
    </div>
    <div class="cta__actions">
        {% if user.is_authenticated %}
            <a class="button" href="{% url 'products:product_create' %}">{{ translatable_content.cta_create_product|safe }}</a>
        {% else %}
            <a class="button" href="{% url 'signup' %}">{{ translatable_content.cta_start_now|safe }}</a>
            &nbsp;
            <a class="button button--ghost" href="{% url 'accounts:login' %}">{{ translatable_content.cta_have_account|safe }}</a>
        {% endif %}
    </div>
</section>
{% endblock %}
