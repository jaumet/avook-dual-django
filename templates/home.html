{% extends 'base.html' %}
{% load static %}

{% block title %}Audiovook Dual — Històries en dues llengües{% endblock %}

{% block content %}
<section class="hero">
    <div class="hero__text">
        <p class="hero__kicker">Dual Understanding And Listening</p>
        <h1>{{ marketing_title }}</h1>
        <p class="hero__subtitle">{{ subtitle }}</p>
        <div class="hero__actions">
            <a class="button" href="#productes">Descobreix els productes</a>
            <a class="button button--ghost" href="{% url 'signup' %}">Crea un compte</a>
        </div>
    </div>
    <div class="hero__art">
        <img src="{% static 'imgs/mockup_portada.png' %}" alt="Mockup Audiovook" />
    </div>
</section>

<section class="features" id="productes">
    <div class="section__header">
        <p class="kicker">Productes</p>
        <h2>Històries curtes per practicar llengües</h2>
        <p>Consulta el catàleg d'audiollibres bilingües. Entra a un producte per veure la descripció i reproduir l'àudio.</p>
        {% if user.is_authenticated %}
            <a class="button button--small" href="{% url 'products:product_create' %}">Afegir un nou producte</a>
        {% endif %}
    </div>
    <div class="product-list">
        {% for product in products %}
            <div class="product-item">
                <h3>{{ product.name }}</h3>
                <p>{{ product.description }}</p>
                <div class="packages">
                    {% for package in product.packages.all %}
                        <div class="package">
                            <h4>{{ package.name }}</h4>
                            <ul class="titles">
                                {% for title in package.titles.all %}
                                    <li>{{ title.human_name }}</li>
                                {% endfor %}
                            </ul>
                        </div>
                    {% endfor %}
                </div>
                <div class="product-card__footer">
                    <span class="product-card__price">{{ product.price }} €</span>
                    <a class="button button--small" href="{% url 'products:product_detail' product.pk %}">Veure fitxa</a>
                </div>
            </div>
        {% empty %}
            <p>Encara no hi ha productes. Si tens permís, crea'n un!</p>
        {% endfor %}
    </div>
</section>

<section class="cta">
    <div class="cta__text">
        <h2>Entra a Audiovook Dual</h2>
        <p>Registra't per gestionar productes, pujar arxius d'àudio i crear una experiència d'aprenentatge immersiva.</p>
    </div>
    <div class="cta__actions">
        {% if user.is_authenticated %}
            <a class="button" href="{% url 'products:product_create' %}">Crea un producte</a>
        {% else %}
            <a class="button" href="{% url 'signup' %}">Comença ara</a>
            <a class="button button--ghost" href="{% url 'login' %}">Ja tinc compte</a>
        {% endif %}
    </div>
</section>
{% endblock %}
